tinymce.PluginManager.add("leanote_nav",function(e){function t(){var t=e.getBody(),r=$(t),i=r.html();if(n!=i){n=i;for(var o=r.find("h1,h2,h3,h4,h5,h6").toArray(),a="<ul>",s=0;s<o.length;++s){var l=$(o[s]).text(),c=o[s].tagName.toLowerCase();a+='<li class="nav-'+c+'"><a data-a="'+c+"-"+encodeURI(l)+'" onclick="window.scrollTo(this, \''+c+"', '"+l+"')\">"+l+"</a></li>"}a+="</ul>",$("#leanoteNavContent").html(a).height("auto"),o.length||$("#leanoteNavContent").html("&nbsp; Nothing...");var d=$("#leanoteNavContent").height(),u=$("#editorContent").height()-29;d>u&&$("#leanoteNavContent").height(u)}}var n="";e.on("init",function(){window.setTimeout(function(){t(),e.on("setcontent beforeadd undo paste",t),e.on("ExecCommand",function(e){t()}),e.on("click",function(e){t(),$("body").trigger("click")})},0)})});