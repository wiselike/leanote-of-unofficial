tinymce.ThemeManager.add("modern",function(e){function t(){function t(t){var r,i=[];if(t)return u(t.split(/[ ,]/),function(t){function n(){var n=e.selection;"bullist"==o&&n.selectorChanged("ul > li",function(e,n){for(var r,i=n.parents.length;i--&&(r=n.parents[i].nodeName,"OL"!=r&&"UL"!=r););t.active(e&&"UL"==r)}),"numlist"==o&&n.selectorChanged("ol > li",function(e,n){for(var r,i=n.parents.length;i--&&(r=n.parents[i].nodeName,"OL"!=r&&"UL"!=r););t.active(e&&"OL"==r)}),t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var o;"|"==t?r=null:d.has(t)?(t={type:t},c.toolbar_items_size&&(t.size=c.toolbar_items_size),i.push(t),r=null):(r||(r={type:"buttongroup",items:[]},i.push(r)),e.buttons[t]&&(o=t,t=e.buttons[o],"function"==typeof t&&(t=t()),t.type=t.type||"button",c.toolbar_items_size&&(t.size=c.toolbar_items_size),t=d.create(t),r.items.push(t),e.initialized?n():e.on("init",n)))}),n.push({type:"toolbar",layout:"flow",items:i}),!0}var n=[];if(tinymce.isArray(c.toolbar)){if(0===c.toolbar.length)return;tinymce.each(c.toolbar,function(e,t){c["toolbar"+(t+1)]=e}),delete c.toolbar}for(var r=1;r<10&&t(c["toolbar"+r]);r++);if(n.length||c.toolbar===!1||t(c.toolbar||m),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}}function n(){function t(t){var n;return"|"==t?{text:"|"}:n=e.menuItems[t]}function n(n){var r,i,o,a,s;if(s=tinymce.makeMap((c.removed_menuitems||"").split(/[ ,]/)),c.menu?(i=c.menu[n],a=!0):i=p[n],i){r={text:i.title},o=[],u((i.items||"").split(/[ ,]/),function(e){var n=t(e);n&&!s[e]&&o.push(t(e))}),a||u(e.menuItems,function(e){e.context==n&&("before"==e.separator&&o.push({text:"|"}),e.prependToContext?o.unshift(e):o.push(e),"after"==e.separator&&o.push({text:"|"}))});for(var l=0;l<o.length;l++)"|"==o[l].text&&(0!==l&&l!=o.length-1||o.splice(l,1));if(r.menu=o,!r.menu.length)return null}return r}var r,i=[],o=[];if(c.menu)for(r in c.menu)o.push(r);else for(r in p)o.push(r);for(var a="string"==typeof c.menubar?c.menubar.split(/[ ,]/):o,s=0;s<a.length;s++){var l=a[s];l=n(l),l&&i.push(l)}return i}function r(t){function n(e){var n=t.find(e)[0];n&&n.focus(!0)}e.shortcuts.add("Alt+F9","",function(){n("menubar")}),e.shortcuts.add("Alt+F10","",function(){n("toolbar")}),e.shortcuts.add("Alt+F11","",function(){n("elementpath")}),t.on("cancel",function(){e.focus()})}function i(t,n){function r(e){return{width:e.clientWidth,height:e.clientHeight}}var i,o,a,s;i=e.getContainer(),o=e.getContentAreaContainer().firstChild,a=r(i),s=r(o),null!==t&&(t=Math.max(c.min_width||100,t),t=Math.min(c.max_width||65535,t),f.setStyle(i,"width",t+(a.width-s.width)),f.setStyle(o,"width",t)),n=Math.max(c.min_height||100,n),n=Math.min(c.max_height||65535,n),f.setStyle(o,"height",n),e.fire("ResizeEditor")}function o(t,n){var r=e.getContentAreaContainer();l.resizeTo(r.clientWidth+t,r.clientHeight+n)}function a(i){function o(){if(p&&p.moveRel&&p.visible()&&!p._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),r=0,i=0;if(t){var o=f.getPos(n),a=f.getPos(t);r=Math.max(0,a.x-o.x),i=Math.max(0,a.y-o.y)}p.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,i)}}function a(){p&&(p.show(),o(),f.addClass(e.getBody(),"mce-edit-focus"))}function s(){p&&(p.hide(),f.removeClass(e.getBody(),"mce-edit-focus"))}function u(){return p?void(p.visible()||a()):(p=l.panel=d.create({type:m?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!m,border:1,items:[c.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:n()},t()]}),e.fire("BeforeRenderUI"),p.renderTo(m||document.body).reflow(),r(p),a(),e.on("nodeChange",o),e.on("activate",a),e.on("deactivate",s),void e.nodeChanged())}var p,m;return c.fixed_toolbar_container&&(m=f.select(c.fixed_toolbar_container)[0]),c.content_editable=!0,e.on("focus",function(){i.skinUiCss?tinymce.DOM.styleSheetLoader.load(i.skinUiCss,u,u):u()}),e.on("blur hide",s),e.on("remove",function(){p&&(p.remove(),p=null)}),i.skinUiCss&&tinymce.DOM.styleSheetLoader.load(i.skinUiCss),{}}function s(o){var a,s,u;return o.skinUiCss&&tinymce.DOM.loadCSS(o.skinUiCss),a=l.panel=d.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[c.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:n()},t(),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),c.resize!==!1&&(s={type:"resizehandle",direction:c.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;u={width:t.clientWidth,height:t.clientHeight}},onResize:function(e){"both"==c.resize?i(u.width+e.deltaX,u.height+e.deltaY):i(null,u.height+e.deltaY)}}),c.statusbar!==!1&&a.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},s]}),c.readonly&&a.find("*").disabled(!0),e.fire("BeforeRenderUI"),a.renderBefore(o.targetNode).reflow(),c.width&&tinymce.DOM.setStyle(a.getEl(),"width",c.width),e.on("remove",function(){a.remove(),a=null}),r(a),{iframeContainer:a.find("#iframe")[0].getEl(),editorContainer:a.getEl()}}var l=this,c=e.settings,d=tinymce.ui.Factory,u=tinymce.each,f=tinymce.DOM,p={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},m="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";l.renderUI=function(t){var n=c.skin!==!1&&(c.skin||"lightgray");if(n){var r=c.skin_url;r=r?e.documentBaseURI.toAbsolute(r):tinymce.baseURL+"/skins/"+n,tinymce.Env.documentMode<=7?t.skinUiCss=r+"/skin.ie7.min.css":t.skinUiCss=r+"/skin.min.css",e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css")}return e.on("ProgressState",function(e){l.throbber=l.throbber||new tinymce.ui.Throbber(l.panel.getEl("body")),e.state?l.throbber.show(e.time):l.throbber.hide()}),c.inline?a(t):s(t)},l.resizeTo=i,l.resizeBy=o});